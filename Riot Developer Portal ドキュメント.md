# Riot Developer Portal ドキュメント

## 1. 概要 (Overview)
このドキュメントは、Riot Games Developer Portalの基本的な理解を提供します。Riotのゲームプレイヤー体験を向上させるための独自のツールや製品の開発を始める手助けとなることを目的としています。

## 2. はじめに (Getting Started)
Developer Portalを利用するには、まずRiot Gamesアカウントでログインする必要があります。ログインするとDeveloper Portalアカウントが作成され、開発用の基本的なAPIキーが自動的に生成されます。

このアカウントにより、製品の提案をRiotのDeveloper Relationsチームに登録できます。製品を登録することで、承認やアクセス権の拡大などについてチームとコミュニケーションを取ることができます。

## 3. 製品登録 (Product Registration)
Riotのゲーム向けのアプリケーションやウェブサイト（これらを「製品」と呼びます）を作成する場合、製品登録が推奨されます。

### 申請プロセス (Application Process)
- **ポリシーの確認:** まず、ナビゲーションバーにあるポリシーをすべて読み、理解してください。ポリシーの遵守は必須です。
- **製品登録:** Riot Games APIを使用しない製品であっても、登録することでRiotにあなたの活動を知らせ、有益な情報提供を受けられる可能性があります。
- **登録方法:** Developer Portalのメインページで「Register Product」ボタンをクリックし、大規模な製品か個人プロジェクトかを選択します。その後、製品の詳細を入力するフォームに記入し、開発者本人であることを証明するための製品認証を行います。
- **レビュー:** 申請が完了すると、Developer Relationsチームが提案をレビューします。承認されると、APIキーのレート制限が緩和され、製品を改善するための関係構築が始まります。
- **承認後の義務:** 承認された製品は、適用されるすべてのルール、ポリシー、法律を遵守し続ける必要があります。
- **却下された場合:** 申請が却下された場合は、Developer Portalのメッセージで理由が通知されます。メッセージシステムを通じてチームと協力し、問題を解決することができます。
- **レビューの基準:** 申請をレビューする際、製品が法律やポリシーに違反していないか、プレイヤーに測定可能な方法で利益をもたらすかなどを評価します。ゲームを簡単化しすぎる製品や、未完成のウェブサイトなどは承認されにくい傾向にあります。

### メッセージ (Messages)
承認・却下の通知は、Developer Portalのアプリケーションメッセージに直接送信されます。申請に関する質問がある場合も、Developer Portal上で回答できます。

製品登録に関する具体的な質問は、サポートサイトからメッセージを送信することで、Developer Relationsチームから迅速な回答を得られます。このメッセージシステムはビジネス用のチャネルであり、責任を持って利用してください。

## 4. Web API
製品がRiot Games APIに依存している場合、APIキーに関する基本的な概念を理解する必要があります。

### APIキー (API Keys)
Developer Portalにサインインしたすべてのユーザーには、アカウントに関連付けられたAPIキーが自動的に付与されます。APIキーにはいくつかの種類があります。

#### 開発用APIキー (DEVELOPMENT API KEYS)
サインイン時に生成されるのは開発用APIキーです。これは、Riot Games APIを試したり、プロトタイプを開発したりするために一時的に提供されるキーです。一般公開を目的としない製品向けで、24時間ごとに無効化されるため、定期的に再生成する必要があります。

#### 個人用APIキー (PERSONAL API KEYS)
製品登録を行うことで個人用APIキーを申請できます。これは開発者自身や小規模なプライベートコミュニティでの利用を目的とした製品向けです。認証プロセスなしで登録できますが、レート制限の引き上げは承認されません。

**個人用APIキーの許容される用途:**
- ストリーミングサイト、掲示板、ボイスチャットサーバー用のボット
- 個人のウェブサイトに自分の統計情報を表示
- 個人的な統計収集や研究プロジェクト
- 本番環境ではなく、個人利用を目的としたプロジェクト

**個人用キーのレート制限:**
- 1秒あたり20リクエスト
- 2分あたり100リクエスト
(この制限はリージョンごとに適用されます)

> 個人用キーを使用して、一般向けのアプリケーション（オープンα/βテストを含む）を運営することはできません。

#### 本番用APIキー (PRODUCTION API KEYS)
プレイヤーに公開したいアプリケーションを開発した場合、本番用APIキーを申請する必要があります。開発用APIキーで公開製品を維持することは許可されていません。本番用キーは、公開製品のトラフィックを維持するのに適した、はるかに高いレート制限を持ちます。

**本番用キーの初期レート制限:**
- 10秒あたり500リクエスト
- 10分あたり30,000リクエスト
(この制限はリージョンごとに適用されます)

本番用キーを申請するには、ダッシュボードで「Register Project」をクリックします。承認プロセスはプロジェクトによって異なります。標準のレート制限はほとんどの開発者のニーズを満たしますが、コミュニティへの貢献度が高く、トラフィックが着実に増加している場合は、制限をさらに拡大できる可能性があります。

複数のプロジェクトに取り組んでいる場合は、それぞれを個別に登録し、個別の本番用APIキーの承認を得る必要があります。

### APIキーのセキュリティ (API KEY SECURITY)
APIキーを適切に保護することは、一般ポリシーで定められた要件です。キーが安全でないと判断された場合、キーは失効させられる可能性があります。

### レスポンスコード (Response Codes)
Riot Games APIはすべてのデータを有効なJSON形式で返します。APIは帯域幅を節約するため、空の値（0、空文字列、空リスト、null）は返しません。返されなかった数値フィールドは0、リストフィールドは空リスト、文字列フィールドは空文字列と見なすことができます。

#### 2XX レスポンスコード
- `200`: 常にAPIリファレンスに記載されたJSON形式のレスポンスボディが返されます。
- `200以外`: レスポンスボディが返される保証はなく、JSON形式である保証もありません。アプリケーションのロジックは、レスポンスボディの内容に依存せず、レスポンスコードのみに基づいて正常に失敗するように設計してください。

#### 4XX エラーコード
クライアント側のリクエストに問題があることを示します。
- `400 (Bad Request)`: リクエストの構文エラー。パラメータの形式が違う、無効なパラメータ、必須パラメータの欠如などが原因です。
- `401 (Unauthorized)`: 認証情報（APIキー）がリクエストに含まれていない。
- `403 (Forbidden)`: サーバーはリクエストを理解したが、承認を拒否。無効なAPIキー、ブラックリストに登録されたキー、サポートされていないパスなどが原因です。
- `404 (Not Found)`: リクエストに一致するリソースが見つからない。指定されたIDが存在しない、パラメータに一致するリソースがないなどが原因です。
- `415 (Unsupported Media Type)`: リクエストのボディがサポートされていない形式である。Content-Typeヘッダーが適切に設定されていないことが原因です。
- `429 (Rate Limit Exceeded)`: アプリケーションがレート制限を超過した。Retry-Afterヘッダーで示された秒数の間、API呼び出しを停止する必要があります。このポリシーに違反するアプリケーションはアクセスが無効になる可能性があります。

#### 5XX エラーコード
サーバー側の問題を示します。
- `500 (Internal Server Error)`: サーバーが予期せぬ条件でリクエストを処理できなかった。
- `503 (Service Unavailable)`: サーバーが一時的にリクエストを処理できない状態。遅延後に解消される一時的な状態です。

### レート制限 (Rate Limiting)
APIの安定性を維持し、乱用を防ぎ、ゲームを支えるシステムを保護するために、APIの呼び出し回数に制限（レート制限）を設けています。

#### レート制限の種類 (RATE LIMITING TYPES)
APIインフラストラクチャには3種類のレート制限があります。
- **アプリケーションレート制限 (Application Rate Limits):** APIキーごとに適用される制限。特定のリージョン内のすべてのAPIエンドポイントへの呼び出しが、そのキーのアプリケーションレート制限にカウントされます。
- **メソッドレート制限 (Method Rate Limits):** エンドポイント（メソッド）ごとに適用される制限。特定のリージョン内の特定のエンドポイントへの呼び出しが、そのメソッドのレート制限にカウントされます。
- **サービスレート制限 (Service Rate Limits):** サービスごとに適用される制限。特定のサービスに関連するすべてのエンドポイントへの呼び出しが、そのサービスのレート制限にカウントされます。この制限はすべてのアプリケーションで共有されます。

これらの制限とは別に、一部の基盤サービスが独自のレート制限を実装している場合もあります。その場合、429エラーが返されますが、X-Rate-Limit-Typeヘッダーは含まれません。

### バージョニング (Versioning)
2019年現在、すべてのRiot Games APIにこのバージョニングガイドラインが適用されます。現在、すべてのLeague of Legends APIはバージョン4です。APIパスにマイナーバージョンは含まれません。

### 非推奨化 (Deprecation)
APIの変更や廃止を行う場合、通常は古いバージョンと新しいバージョンの両方を60日間サポートすることを目指します。この期間は状況によって変動する可能性があり、その場合はソーシャルメディアやDeveloper Relationsブログで通知されます。

非推奨化されたAPIエンドポイントは利用できなくなり、呼び出しはエラーコードを返します。
